let t=!1;try{document.createElement("div",{get is(){t=!0}})}catch(t){console.error(t)}t||await import("https://unpkg.com/@ungap/custom-elements/es.js");import*as c from"./data.min.js";const h=new class{#t=new Map;#i=new Map;sendMessage(t,e){this.#i.set(t,e),this.#t.has(t)||this.#t.set(t,[]);for(const s of this.#t.get(t))s(e);return()=>{this.#i.delete(t)}}checkMessage(t){return this.#i.get(t)}subscribe(t,e){if(t&&e){this.#t.has(t)||this.#t.set(t,[]);const s=this.#t.get(t);s.indexOf(e)<0&&s.push(e);t=this.#i.get(t);return t&&e(t),()=>{var t=s.indexOf(e);null!=t&&-1<t&&s.splice(t,1)}}}};class e extends HTMLSelectElement{#o=!1;get dataArray(){return[]}extraOptionInit(t,e){}connectedCallback(){if(!this.#o){this.#o=!0;for(var[t,e]of this.dataArray.entries()){var s=document.createElement("option");[s.value,s.text]=[t,e.name],this.extraOptionInit(s,e),this.add(s)}}}}class i extends e{static#h=new Map;get dataArray(){return c.COLOURS}extraOptionInit(t,e){i.#h.has(t.value)||i.#h.set(t.value,`background:#${e.hex};color:#`+i.#l(e.hex)),this.hasAttribute("no-opt-colours")||(t.style=i.#h.get(t.value))}static get observedAttributes(){return["no-opt-colours"]}attributeChangedCallback(t){if(this.hasAttribute(t))for(const e of this)e.removeAttribute("style");else if(!this.hasAttribute(t))for(const s of this)s.style=i.#h.get(s.value)}static#l(t){var e=(t=+("0x"+t))>>16,s=t>>8&255,t=255&t;return 110<Math.sqrt(e*e*.299+s*s*.587+t*t*.114)?"000":"fff"}}class s extends HTMLSelectElement{#u;#o=!1;#m=()=>{};connectedCallback(){if(this.isConnected){if(!this.#o){this.#o=!0;var t,e,s=document.createElement("optgroup"),i=document.createElement("optgroup");s.label="Modern",i.label="Ancient";for([t,e]of c.BREEDS.entries()){var r=document.createElement("option");r.value=t,r.text=e.name,("M"===e.type?s:i).append(r)}this.append(s,i),this.addEventListener("change",()=>{c.areBreedsCompatible(this.value,this.#u)||(this.#u=this.value,h.sendMessage(this.id,this.value))})}this.#u=this.value,this.#m=h.sendMessage(this.id,this.value)}}disconnectedCallback(){this.#m()}}class r extends HTMLSelectElement{#o=!1;#p="basic";#g="primary";#v;#C;#k=()=>{};#M(t){this.#k?.(),this.#k=h.subscribe(t,this.#A.bind(this))}static get observedAttributes(){return["slot","breed","breed-name","default"]}attributeChangedCallback(t,e,s){"default"===t?this.#p=s?.toLowerCase()??"basic":"breed"===t?(this.#C=s,this.#M(s)):"breed-name"===t?(this.#v=s?.toLowerCase(),this.#C||this.#A(this.#v)):"slot"===t&&(this.#g=s??"primary",this.#A())}connectedCallback(){this.#o=!0,this.#M(this.#C)}disconnectedCallback(){this.#k&&this.#k()}#A(s){if(this.isConnected&&this.#o){var i=this.value;let t,e;s=s||(h.checkMessage(this.#C)??(this.#v?c.BREEDS.findIndex(t=>t.name.toLowerCase()===this.#v):null));for(let t=this.length-1;0<=t;t--)this[t].dataset.auto&&this.remove(t);for(const a of this.options)if(a.text.toLowerCase()===this.#p){e=a.value;break}for(const o of c.genesForBreed(this.#g,s)){var r=c.GENES[this.#g][o].name,n=(t||o.toString()!==i||(t=o),e||r.toLowerCase()!==this.#p||(e=o),document.createElement("option"));[n.value,n.text]=[o,r],n.dataset.auto=!0,this.add(n)}this.value=t??e??this[0].value}}}customElements.define("fr-ages",class extends e{get dataArray(){return c.AGES}},{extends:"select"}),customElements.define("fr-genders",class extends e{get dataArray(){return c.GENDERS}},{extends:"select"}),customElements.define("fr-elements",class extends e{get dataArray(){return c.ELEMENTS}},{extends:"select"}),customElements.define("fr-eyes",class extends e{get dataArray(){return c.EYES}extraOptionInit(t,e){0===e.probability&&(t.dataset.notNat=!0,this.hasAttribute("only-natural"))&&(t.disabled=!0,t.style="display: none;")}static get observedAttributes(){return["only-natural"]}attributeChangedCallback(t){if(this.hasAttribute(t))for(const e of this)"true"===e.dataset.notNat&&(e.disabled=!0,e.style="display: none;");else for(const s of this)s.removeAttribute("disabled"),s.removeAttribute("style")}},{extends:"select"}),customElements.define("fr-colours",i,{extends:"select"}),customElements.define("fr-breeds",s,{extends:"select"}),customElements.define("fr-genes",r,{extends:"select"});
//# sourceMappingURL=forms.js.map