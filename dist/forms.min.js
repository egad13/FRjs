let t=!1;try{document.createElement("div",{get is(){t=!0}})}catch(t){console.error(t)}t||await import("https://unpkg.com/@ungap/custom-elements/es.js");import*as a from"./data.js";const r=new class{#t=new Map;#i=new Map;sendMessage(t,s){this.#i.set(t,s),this.#t.has(t)||this.#t.set(t,[]);for(const e of this.#t.get(t))e(s);return()=>{this.#i.delete(t)}}checkMessage(t){return this.#i.get(t)}subscribe(t,s){if(t&&s){this.#t.has(t)||this.#t.set(t,[]);const e=this.#t.get(t);e.indexOf(s)<0&&e.push(s);t=this.#i.get(t);return t&&s(t),()=>{var t=e.indexOf(s);null!=t&&-1<t&&e.splice(t,1)}}}};class s extends HTMLSelectElement{#o=!1;connectedCallback(){if(!this.#o){this.#o=!0;for(var[t,s]of a.EYES.entries()){var e=document.createElement("option");[e.value,e.text]=[t,s.name],this.add(e)}}}}class o extends HTMLSelectElement{#o=!1;static#h=new Map;static get observedAttributes(){return["no-opt-colours"]}attributeChangedCallback(t){if(this.hasAttribute(t))for(const s of this)s.removeAttribute("style");else if(!this.hasAttribute(t))for(const e of this)e.style=o.#h.get(e.value)}connectedCallback(){if(!this.#o){this.#o=!0;var t,s,e=!this.hasAttribute("no-opt-colours");for([t,s]of a.COLOURS.entries()){var i=document.createElement("option");[i.value,i.text]=[t,s.name],o.#h.has(i.value)||o.#h.set(i.value,`background:#${s.hex};color:#`+o.#l(s.hex)),e&&(i.style=o.#h.get(i.value)),this.add(i)}}}static#l(t){var s=(t=+("0x"+t))>>16,e=t>>8&255,t=255&t;return 110<Math.sqrt(s*s*.299+e*e*.587+t*t*.114)?"000":"fff"}}class e extends HTMLSelectElement{#u;#o=!1;#m=()=>{};connectedCallback(){if(this.isConnected){if(!this.#o){this.#o=!0;var t,s,e=document.createElement("optgroup"),i=document.createElement("optgroup");e.label="Modern",i.label="Ancient";for([t,s]of a.BREEDS.entries()){var o=document.createElement("option");o.value=t,o.text=s.name,("M"===s.type?e:i).append(o)}this.append(e,i),this.addEventListener("change",()=>{a.areBreedsCompatible(this.value,this.#u)||(this.#u=this.value,r.sendMessage(this.id,this.value))})}this.#u=this.value,this.#m=r.sendMessage(this.id,this.value)}}disconnectedCallback(){this.#m()}}class i extends HTMLSelectElement{#o=!1;#p="basic";#g="primary";#v;#M;#k=()=>{};#C(t){this.#k?.(),this.#k=r.subscribe(t,this.#S.bind(this))}static get observedAttributes(){return["slot","breed","breed-name","default"]}attributeChangedCallback(t,s,e){"default"===t?this.#p=e?.toLowerCase()??"basic":"breed"===t?(this.#M=e,this.#C(e)):"breed-name"===t?(this.#v=e?.toLowerCase(),this.#M||this.#S(this.#v)):"slot"===t&&(this.#g=e??"primary",this.#S())}connectedCallback(){this.#o=!0,this.#C(this.#M)}disconnectedCallback(){this.#k&&this.#k()}#S(e){if(this.isConnected&&this.#o){var i,o,h=this.value;let t,s;e=e||(r.checkMessage(this.#M)??(this.#v?a.BREEDS.findIndex(t=>t.name.toLowerCase()===this.#v):null));for(let t=this.length-1;0<=t;t--)this[t].dataset.auto&&this.remove(t);for(const c of this.options)if(c.text.toLowerCase()===this.#p){s=c.value;break}for({index:i,name:o}of a.genesForBreed(this.#g,e)){t||i.toString()!==h||(t=i),s||o.toLowerCase()!==this.#p||(s=i);var n=document.createElement("option");[n.value,n.text]=[i,o],n.dataset.auto=!0,this.add(n)}this.value=t??s??this[0].value}}}customElements.define("fr-eyes",s,{extends:"select"}),customElements.define("fr-colours",o,{extends:"select"}),customElements.define("fr-breeds",e,{extends:"select"}),customElements.define("fr-genes",i,{extends:"select"});
//# sourceMappingURL=dist/forms.js.map